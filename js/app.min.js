document.addEventListener('DOMContentLoaded',dcl)
function dcl(){st=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop,lastScrollTop=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop,ps=document.getElementsByClassName('prj'),lastProj=''
var navSubHeight=document.getElementById('sub-menu').clientHeight
document.querySelector('.init-ht').classList.remove('init-ht')
document.getElementById('nav-sub-style').innerText='#n-sub:hover #sub-menu, #n-sub:focus-within #sub-menu{height: '+navSubHeight+'px;}'
document.getElementById('nav-btn').addEventListener('click',function(){document.body.classList.toggle('menuOn')})
let prlx=document.getElementsByClassName('parallax-container')
for(let i=0;i<prlx.length;i++){var px=prlx[i],img1=px.querySelector('img'),tween=new TimelineMax();tween.fromTo(img1,1,{top:'-30%'},{top:'10%'});var scene=new ScrollMagic.Scene({triggerElement:px,triggerHook:"onEnter",duration:"200%",tweenChanges:true,reverse:true,}).setTween(tween).addTo(new ScrollMagic.Controller());}
if('loading'in HTMLImageElement.prototype||!('IntersectionObserver'in window)){var lazies=document.getElementsByClassName('loz');for(let i=0;i<lazies.length;i++){var laz=lazies[i];if(laz.dataset.srcset){laz.srcset=laz.dataset.srcset}
if(laz.dataset.src){laz.src=laz.dataset.src;}}}else{var loz=document.createElement('script')
loz.src='/js/lozad.js'
loz.onload=function(){var lzObs=window.lozad('.loz');lzObs.observe();}
document.body.appendChild(loz)}
for(let i=0;i<ps.length;i++){ps[i].querySelector('#a'+i).addEventListener('click',function(){openOverlay(ps[i])})
ps[i].querySelector('.c1').addEventListener('click',function(){closeOverlay(event.currentTarget.closest('article'))
lastProj=''})
ps[i].querySelector('button').addEventListener('click',showSum)
ps[i].addEventListener('focusout',blurWithinProj)
ps[i].addEventListener('focusin',focusWithinProj)}
function blurWithinProj(){if(event.relatedTarget){if(!event.relatedTarget.closest('ARTICLE.prj')){closeOverlay(event.currentTarget)
lastProj=''}}}
function closeOverlay(project){project.classList.remove('on')
document.querySelector('header').classList.remove('z-auto')
var iframe=project.querySelector('iframe')
if(iframe){iframe.contentWindow.postMessage('{"event":"command","func":"'+'pauseVideo'+'","args":""}','*')}}
function focusWithinProj(){if(lastProj){if(lastProj!==event.currentTarget&&event.target!==null){closeOverlay(lastProj)}}
openOverlay(event.currentTarget)}
function openOverlay(project){var ove=project.querySelector('.ove')
if(ove.dataset.v){project.querySelector('iframe').setAttribute('src','https://www.youtube.com/embed/'
+ove.dataset.v+'?enablejsapi=1&color=white')
ove.removeAttribute('data-v')}
if(ove.dataset.p){project.querySelector('img').setAttribute('src',ove.dataset.p)
ove.removeAttribute('data-p')}
project.classList.add('on')
document.querySelector('header').classList.add('z-auto')
lastProj=project}
function showSum(){event.preventDefault()
event.currentTarget.parentNode.parentNode.classList.toggle('showinfo')}
window.addEventListener("scroll",function(){st=window.pageYOffset||document.documentElement.scrollTop;if(st>lastScrollTop&&st>150){document.querySelector('header').classList.add('hide');document.body.classList.add('shrink');}else{document.querySelector('header').classList.remove('hide');}
if(st<=30){document.body.classList.remove('shrink');}
lastScrollTop=st;},false);}